---
title: "Example using manual toggle of the chunk option `include`"
author: "Clement Lee"
date: "2021-03-07"
output:
  pdf_document: default
  html_document: default
classoption: a4paper
header-includes:
  \usepackage{amsmath,xcolor}
---

If you are not familiar with the syntax of R and/or Markdown, simply:

1. open the source code (with file extension "Rmd") in RStudio;
2. click the black triangle next to the ***Knit*** button;
3. click the ***Knit to \<required file format\>*** button, and the generated document will pop up;
4. toggle between `include = FALSE` & `include = TRUE` below, which correspond to the questions (only) and the solutions, respectively, and see the differences in the generated documents.

In the source code, a code chunk starts with a line of triple backticks & the curly bracket pair, and ends with a line of triple backticks. Everything in-between will be evalulated by `R`.

```{r setup, echo = FALSE}
## Below is some R code. A line that starts with (any number of) # is a comment 

## Below is where the `include` option is set globally
knitr::opts_chunk$set(include = TRUE) # try toggling between TRUE & FALSE

## Below we retrieve the `include` option for latter use
is_answer <- knitr::opts_chunk$get()$include

## Below is an extra function for showing where the solution begins
colorise <- function(x, color = "red") {
  if (knitr::is_latex_output()) {
    sprintf("\\textcolor{%s}{%s}", color, x)
  } else if (knitr::is_html_output()) {
    sprintf("<span style='color: %s;'>%s</span>", color, 
      x)
  } else x
}
```










# Question 1 {-}

TYPE YOUR QUESTION HERE.

`r if (is_answer) {colorise("Solution:")}`

`r if (is_answer) {"
TYPE YOUR SOLUTION HERE. SEE THE NEXT Q&A FOR EXPLANATION.
"}`










# Question 2 {-}

You type the "normal" text, usually the question, in a line without any "environment" i.e. there are no backticks, quotes, or hashtags, before or after the line. If you want `R` to evaluate something inline, type

1. a single backtick, then
2. the character "r" followed by a space, then
3. the expression in `R` you want to evaulate, and finally
4. another single backtick.

See how it is done in the source code: $1+2=$ `r 2+1`. You will also see that maths being typeset between a pair of single dollar signs are allowed.

`r if (is_answer) {colorise("Solution:")}`

`r if (is_answer) {"
You should only see this line in the generated solutions, pdf or html, but not in the generated questions. This is because we harness the power of the inline evaluation using a pair of backticks, and the object $\\texttt{is\\_answer}$ we have defined in the source code.
"}`










# Question 3 {-}

This is a "pure" maths equation, with no statistical or data analysis required. Prove that
$$(a+b)^2=a^2+2ab+b^2.$$
(You can also see that maths typeset between a pair of double dollar signs are allowed. Other LaTeX environments allowed are `align`, `equation`, `eqnarray`, their no-numbering versions i.e. with asterisks, and `\[ \]`.)

`r if (is_answer) {colorise("Solution:")}`

`r if (is_answer) {"
The solution is
\\begin{align*}
  (a+b)^2 &= (a+b)(a+b)\\\\
          &= a^2+ab+ba+b^2\\\\
          &= a^2+2ab+b^2
\\end{align*}
You can see that maths environments also work within the solution. However, any backslash has to be doubled because there is an additional layer of evaluated. The solution content is evaluated by $\\texttt{R}$ first before being rendered by Markdown. This also applies to other symbols and commands e.g. $\\alpha$ and $\\boldsymbol{1}$ (see source code).
"}`










# Question 4 {-}

Plot the `cars` data set.

`r if (is_answer) {colorise("Solution:")}`

`r if (is_answer) {"
The cars data set is
"}`

```{r}
plot(cars)
```
